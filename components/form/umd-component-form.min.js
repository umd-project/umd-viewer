const template=document.createElement("template");template.innerHTML='\n    <style>\n      :host {\n        display:grid;\n        grid-template-rows: max-content;\n        grid-template-columns: auto;\n      }\n\n      :host([hidden]) {\n        display:none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      .dummy {\n        grid-row: 1;\n        grid-column: 1;\n      }\n\n      .form {\n        grid-row: 1;\n        grid-column:1;\n        width:100%;\n      }\n    </style>\n    <iframe class="form" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen width="100%"></iframe>\n';export class UmdComponentForm extends HTMLElement{static get observedAttributes(){return["data-source","data-url","data-aspect"]}constructor(){super(),this._shadowRoot=this.attachShadow({mode:"open"}),this._shadowRoot.appendChild(template.content.cloneNode(!0));const observer=new IntersectionObserver((entry,observer)=>{this._calibrateWH()});observer.observe(this._shadowRoot.querySelector(".form"))}connectedCallback(){this._loadForm()}_calibrateWH(){const _form=this._shadowRoot.querySelector(".form"),w=this.offsetWidth,_aspect=this.getAttribute("data-aspect");let h2w=1.414;if(_aspect){const _aspectarr=_aspect.split(":");if(2==_aspectarr.length){const _aspectW=parseFloat(_aspectarr[0]),_aspectH=parseFloat(_aspectarr[1]);0!=_aspectW&&0!=_aspectH&&(h2w=_aspectH/_aspectW)}}let h=parseInt(w*h2w);_form.setAttribute("width",`${w}px`),_form.setAttribute("height",`${h}px`)}_loadForm(){const _url=this.getAttribute("data-url");if(!_url)return;let _source="embed";switch(this.getAttribute("data-source")&&(_source=this.getAttribute("data-source")),_source){case"embed":this._loadEmbedForm(_url)}}_loadEmbedForm(url){const _form=this._shadowRoot.querySelector(".form");_form.src=this.parseUrl(url)}parseUrl(url){const _url=new URL(url),_origin=_url.origin.toLowerCase(),_pathname=_url.pathname;switch(console.log(_origin),_origin){case"https://docs.google.form":case"https://forms.gle":return`${_origin}${_pathname}?embedded=true`;default:return url}}attributeChangedCallback(name,oldVal,newVal){}disconnectedCallback(){}}window.customElements.define("umd-component-form",UmdComponentForm);